[general]
static=yes
writeprotect=no
clearglobalvars=no
exten => _[1-5]XXX,1,Dial(IAX2/srv-wt12/${EXTEN})
exten => _[1-5]XXX,2,Playtones(congestion)
exten => _[1-5]XXX,3,Congestion()

exten => _1[0-5]X,1,Goto(dept_1,${EXTEN},1)
exten => _2[0-5]X,1,Goto(dept_2,${EXTEN},1)

[secretariat]

exten => _6XXX,1,Dial(SIP/${EXTEN},20)
exten => _6XXX,2,VoiceMail(${EXTEN}@secretariat)
exten => _7XXX,1,Dial(SIP/${EXTEN},20)
exten => _7XXX,2,VoiceMail(${EXTEN}@labor)
exten => _8XXX,1,Dial(SIP/${EXTEN},20)
exten => _8XXX,2,VoiceMail(${EXTEN}@comptabilite)
exten => 8999,1,Dial(SIP/8001&SIP/3002,20)
exten => 8999,2,VoiceMail(${EXTEN}@comptabilite)
exten => _9XXX,1,Dial(SIP/${EXTEN},20)
exten => _9XXX,2,VoiceMail(${EXTEN}@commerce)
exten => _10XXX,1,Dial(SIP/${EXTEN},20)
exten => _10XXX,2,VoiceMail(${EXTEN}@direction)

exten => 6000,1,VoiceMailMain(${CALLERID(num)}@secretariat)

[labor]
exten => _6XXX,1,Dial(SIP/${EXTEN},20)
exten => _6XXX,2,VoiceMail(${EXTEN}@secretariat)
exten => _7XXX,1,Dial(SIP/${EXTEN},20)
exten => _7XXX,2,VoiceMail(${EXTEN}@labor)
exten => _8XXX,1,Dial(SIP/${EXTEN},20)
exten => _8XXX,2,VoiceMail(${EXTEN}@comptabilite)
exten => 8999,1,Dial(SIP/8001&SIP/3002,20)
exten => 8999,2,VoiceMail(${EXTEN}@comptabilite)
exten => _9XXX,1,Dial(SIP/${EXTEN},20)
exten => _9XXX,2,VoiceMail(${EXTEN}@commerce)

exten => 7000,1,VoiceMailMain(${CALLERID(num)}@labor)

[comptabilite]
exten => _6XXX,1,Dial(SIP/${EXTEN},20)
exten => _6XXX,2,VoiceMail(${EXTEN}@secretariat)
exten => _7XXX,1,Dial(SIP/${EXTEN},20)
exten => _7XXX,2,VoiceMail(${EXTEN}@labor)
exten => 8999,1,Dial(SIP/8001&SIP/3002,20)
exten => 8999,2,VoiceMail(${EXTEN}@comptabilite)
exten => _8XXX,1,Dial(SIP/${EXTEN},20)
exten => _8XXX,2,VoiceMail(${EXTEN}@comptabilite)
exten => _9XXX,1,Dial(SIP/${EXTEN},20)
exten => _9XXX,2,VoiceMail(${EXTEN}@commerce)

exten => 8000,1,VoiceMailMain(${CALLERID(num)}@comptabilite)

[commerce]
exten => _6XXX,1,Dial(SIP/${EXTEN},20)
exten => _6XXX,2,VoiceMail(${EXTEN}@secretariat)
exten => _7XXX,1,Dial(SIP/${EXTEN},20)
exten => _7XXX,2,VoiceMail(${EXTEN}@labor)
exten => _8XXX,1,Dial(SIP/${EXTEN},20)
exten => _8XXX,2,VoiceMail(${EXTEN}@comptabilite)
exten => 8999,1,Dial(SIP/8001&SIP/3002,20)
exten => 8999,2,VoiceMail(${EXTEN}@comptabilite)
exten => _9XXX,1,Dial(SIP/${EXTEN},20)
exten => _9XXX,2,VoiceMail(${EXTEN}@commerce)

exten => 4000,1,VoiceMailMain(${CALLERID(num)}@commerce)

[direction]
exten => _6XXX,1,Dial(SIP/${EXTEN},20)
exten => _6XXX,2,VoiceMail(${EXTEN}@secretariat)
exten => _7XXX,1,Dial(SIP/${EXTEN},20)
exten => _7XXX,2,VoiceMail(${EXTEN}@labor)
exten => _8XXX,1,Dial(SIP/${EXTEN},20)
exten => _8XXX,2,VoiceMail(${EXTEN}@comptabilite)
exten => 8999,1,Dial(SIP/8001&SIP/3002,20)
exten => 8999,2,VoiceMail(${EXTEN}@comptabilite)
exten => _9XXX,1,Dial(SIP/${EXTEN},20)
exten => _9XXX,2,VoiceMail(${EXTEN}@commerce)

exten => 10000,1,VoiceMailMain(${CALLERID(num)}@direction)

[interco-avec-wt12]
exten => _[1-5]XXX,1,Dial(IAX2/srv-wt12/${EXTEN})
exten => _[1-5]XXX,2,Playtones(congestion)
exten => _[1-5]XXX,3,Congestion()

exten => _1[0-5]X,1,Goto(dept_1,${EXTEN},1)
exten => _2[0-5]X,1,Goto(dept_2,${EXTEN},1)

[dept_1]
exten => _[1-5]XX,1,Goto(interco-avec-wt12,${EXTEN},1)
[dept_2]
exten => _[1-5]XX,1,Goto(interco-avec-wt12,${EXTEN},1)
